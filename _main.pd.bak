#N struct NC-stick float x float y symbol s;
#N canvas 0 16 1010 644 10;
#X declare -path .;
#X obj 178 591 soundoutput;
#X msg 246 17 \; #transport play 1;
#X obj 38 3079 tabwrite~;
#X obj 36 3140 tabread~;
#X obj 38 3079 tabwrite~;
#X obj 36 3140 tabread~;
#X obj 38 3079 tabwrite~;
#X obj 36 3140 tabread~;
#X obj 87 19 soundinput;
#X obj 802 37 accelerate;
#X obj 54 472 simpledelay delL;
#X obj 97 182 *~ 0.5;
#X obj 88 204 tabwrite~ left;
#X obj 87 68 rj/e_softclip soundinL;
#X obj 412 427 r del;
#X obj 163 442 r del;
#N canvas 361 289 450 300 analyseL 0;
#X obj 38 73 loadbang;
#X obj 28 32 env~;
#X obj 28 114 clip 20 100;
#X msg 38 94 30;
#X obj 28 136 - 15;
#X obj 28 157 * 4;
#X obj 28 177 s del;
#X obj 27 10 inlet~;
#X obj 121 61 +;
#X floatatom 121 120 5 0 0 0 - - -;
#X obj 121 139 vsl 10 100 0 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 1094 1;
#X obj 121 101 clip 0 0.98;
#X obj 121 245 s Lenv;
#X obj 121 81 * 0.001;
#X obj 149 61 * 0.7;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 1 0 8 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 7 0 1 0;
#X connect 8 0 13 0;
#X connect 8 0 14 0;
#X connect 9 0 10 0;
#X connect 10 0 12 0;
#X connect 11 0 9 0;
#X connect 13 0 11 0;
#X connect 14 0 8 1;
#X restore 123 98 pd analyseL;
#X obj 304 457 simpledelay delR;
#X obj 294 207 *~ 0.5;
#N canvas 497 249 450 300 analyseR 0;
#X obj 38 73 loadbang;
#X obj 28 32 env~;
#X obj 28 114 clip 20 100;
#X msg 38 94 30;
#X obj 28 136 - 15;
#X obj 28 157 * 4;
#X obj 27 10 inlet~;
#X obj 121 61 +;
#X floatatom 121 120 5 0 0 0 - - -;
#X obj 121 139 vsl 10 100 0 1 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 4676 1;
#X obj 121 101 clip 0 0.98;
#X obj 149 61 * 0.95;
#X obj 121 81 * 0.001;
#X obj 122 245 s Renv;
#X obj 28 177 s Rdel;
#X obj 108 25 s~ guit;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 1 0 7 0;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 14 0;
#X connect 6 0 1 0;
#X connect 6 0 15 0;
#X connect 7 0 11 0;
#X connect 7 0 12 0;
#X connect 8 0 9 0;
#X connect 9 0 13 0;
#X connect 10 0 8 0;
#X connect 11 0 7 1;
#X connect 12 0 10 0;
#X restore 308 97 pd analyseR;
#X obj 285 229 tabwrite~ right;
#X obj 96 160 r~ Lechoed;
#X obj 172 354 s~ Lechoed;
#X obj 426 402 s~ Rechoed;
#X obj 294 187 r~ Rechoed;
#X obj 173 161 r Renv;
#X obj 370 187 r Lenv;
#X obj 729 84 bang~;
#X obj 729 124 s dspbangR;
#X obj 88 135 r dspbangL;
#X obj 285 163 r dspbangR;
#X obj 526 114 table right 264600;
#X obj 729 104 rj/m_speedlimit 6000;
#X obj 286 311 r dspbangL;
#X obj 163 311 r dspbangR;
#X obj 383 274 r dspbangL;
#X obj 466 273 r dspbangR;
#N canvas 15 98 622 480 presets 0;
#X obj 40 26 inlet;
#X msg 43 122 \; param1 0 \; param2 22050 \; param3 22050 \; param4
0.5 \; param5 0.75 \; param6 0.625 \; param7 0.7 \; param8 0.5 \; param9
0.53761 \;;
#X msg 116 307 \; param1 0 \; param2 10000 \; param3 4637 \; param4
0.98 \; param5 0.685 \; param6 0.779 \; param7 0.74 \; param8 0.68
\; param9 0.53761 \;;
#X msg 199 123 \; param1 0 \; param2 10000 \; param3 4637 \; param4
0.98 \; param5 0.685 \; param6 0.779 \; param7 0.74 \; param8 0.68
\; param9 0 \;;
#X msg 278 304 \; param1 10 \; param2 10000 \; param3 4637 \; param4
0.99 \; param5 0.685 \; param6 0.779 \; param7 0.889 \; param8 0.84
\; param9 0.53761 \;;
#X msg 359 131 \; param1 10 \; param2 10000 \; param3 4637 \; param4
0.99 \; param5 0.685 \; param6 0.779 \; param7 0.889 \; param8 0.84
\; param9 0 \;;
#X msg 443 303 \; param1 216.535 \; param2 22050 \; param3 22050 \;
param4 0.677165 \; param5 0.850394 \; param6 0.92126 \; param7 0.80315
\; param8 0.818898 \; param9 0.11811 \;;
#X obj 39 70 route default large large_noexcursion huge huge_noexcursion
tadada;
#X connect 0 0 7 0;
#X connect 7 0 1 0;
#X connect 7 1 2 0;
#X connect 7 2 3 0;
#X connect 7 3 4 0;
#X connect 7 4 5 0;
#X connect 7 5 6 0;
#X restore 868 435 pd presets;
#X msg 868 293 default;
#X msg 868 362 huge;
#X msg 868 385 huge_noexcursion;
#X msg 868 316 large;
#X msg 868 339 large_noexcursion;
#X msg 868 408 tadada;
#N canvas 744 72 280 336 edit_params 0;
#X obj 25 92 hsl 128 15 220.5 22050 1 0 param3 param3 damping -2 -8
0 10 -262144 -1 -1 8400 0;
#X floatatom 157 91 10 0 0 0 - param3 damping;
#X obj 25 123 hsl 128 15 0 1 0 0 param4 param4 decay -2 -8 0 10 -262144
-1 -1 12573 0;
#X floatatom 157 122 10 0 0 0 - param4 decay;
#X obj 25 28 hsl 128 15 0 250 0 0 param1 param1 predelay -2 -8 0 10
-262144 -1 -1 508 0;
#X floatatom 157 27 10 0 0 0 - param1 predelay;
#X obj 25 60 hsl 128 15 220.5 22050 1 0 param2 param2 bandwidth -2
-8 0 10 -262144 -1 -1 10519 0;
#X floatatom 157 59 10 0 0 0 - param2 bandwidth;
#X obj 24 191 hsl 128 15 0 1 0 0 param6 param6 input_diffusion_2 -2
-8 0 10 -262144 -1 -1 9893 0;
#X floatatom 156 190 10 0 0 0 - param6 input_diffusion2;
#X obj 25 156 hsl 128 15 0 1 0 0 param5 param5 input_diffusion_1 -2
-8 0 10 -262144 -1 -1 8700 0;
#X floatatom 157 155 10 0 0 0 - param5 input_diffusion1;
#X obj 23 255 hsl 128 15 0 1 0 0 param8 param8 decay_diffusion_2 -2
-8 0 10 -262144 -1 -1 10668 0;
#X floatatom 155 254 10 0 0 0 - param8 decay_diffusion2;
#X obj 24 222 hsl 128 15 0 1 0 0 param7 param7 decay_diffusion_1 -2
-8 0 10 -262144 -1 -1 11290 0;
#X floatatom 156 221 10 0 0 0 - param7 decay_diffusion1;
#X obj 23 287 hsl 128 15 0 5 0 0 param9 param9 excursion -2 -8 0 10
-262144 -1 -1 0 0;
#X floatatom 155 286 10 0 0 0 - param9 excursion;
#X restore 868 270 pd edit_params;
#N canvas 66 24 387 608 receive_params 0;
#X msg 58 293 input_diffusion1 \$1;
#X msg 70 349 input_diffusion2 \$1;
#X msg 78 410 decay_diffusion1 \$1;
#X msg 87 469 decay_diffusion2 \$1;
#X msg 33 75 predelay \$1;
#X msg 33 132 bandwidth \$1;
#X msg 33 183 damping \$1;
#X msg 33 238 decay \$1;
#X msg 125 533 excursion \$1;
#X obj 33 547 outlet;
#X obj 33 48 r predelay;
#X obj 33 105 r bandwidth;
#X obj 33 159 r damping;
#X obj 33 213 r decay;
#X obj 58 268 r input_diffusion1;
#X obj 70 322 r input_diffusion2;
#X obj 78 383 r decay_diffusion1;
#X obj 87 442 r decay_diffusion2;
#X obj 125 503 r excursion;
#X connect 0 0 9 0;
#X connect 1 0 9 0;
#X connect 2 0 9 0;
#X connect 3 0 9 0;
#X connect 4 0 9 0;
#X connect 5 0 9 0;
#X connect 6 0 9 0;
#X connect 7 0 9 0;
#X connect 8 0 9 0;
#X connect 10 0 4 0;
#X connect 11 0 5 0;
#X connect 12 0 6 0;
#X connect 13 0 7 0;
#X connect 14 0 0 0;
#X connect 15 0 1 0;
#X connect 16 0 2 0;
#X connect 17 0 3 0;
#X connect 18 0 8 0;
#X restore 606 400 pd receive_params;
#X obj 635 474 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 1403 1;
#X msg 632 493 dry \$1;
#X obj 632 428 loadbang;
#X msg 632 449 0.33;
#X obj 163 331 revechoplayer left;
#X obj 382 353 *~ 0.5;
#X obj 512 353 *~ 0.5;
#X obj 164 381 *~ 0.3;
#X obj 231 382 *~ 0.3;
#X obj 381 382 *~ 0.5;
#X obj 513 383 *~ 0.5;
#N canvas 468 334 450 300 guitartone 0;
#X obj 68 17 r~ guit;
#X floatatom 196 38 5 0 0 0 - - -;
#X obj 77 95 bp~ 55 2;
#X obj 72 218 outlet~;
#X obj 220 95 bp~ 10000 12;
#X obj 142 96 hip~ 1000;
#X obj 152 130 lop~ 15000;
#X connect 0 0 2 0;
#X connect 0 0 4 0;
#X connect 0 0 5 0;
#X connect 1 0 2 1;
#X connect 2 0 3 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 3 0;
#X restore 250 140 pd guitartone;
#N canvas 468 334 450 300 voxtone 0;
#X obj 140 115 lop~ 15000;
#X obj 77 95 bp~ 55 2;
#X obj 142 96 hip~ 1000;
#X obj 220 95 bp~ 10000 18;
#X obj 76 159 outlet~;
#X obj 68 17 r~ vox;
#X connect 0 0 4 0;
#X connect 1 0 4 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 5 0 1 0;
#X connect 5 0 2 0;
#X connect 5 0 3 0;
#X restore 2 120 pd voxtone;
#X obj 53 521 rj/e_reverb dude2;
#X obj 448 526 rj/e_platereverb mydude;
#X obj 710 432 r Lenv;
#X obj 58 94 s~ vox;
#X obj 487 174 env~;
#X obj 551 161 vu 15 120 empty empty -1 -8 0 10 -66577 -1 1 0;
#X obj 487 198 - 100;
#X obj 598 174 env~;
#X obj 662 161 vu 15 120 empty empty -1 -8 0 10 -66577 -1 1 0;
#X obj 598 198 - 100;
#X obj 626 339 r Renv;
#X obj 628 361 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 -262144
-1 -1 5999 1;
#X obj 550 27 metro 1000;
#X obj 659 47 + 1000;
#X obj 533 72 s dspbangL;
#X obj 526 95 table left 88200;
#X obj 383 295 revechoplayer right;
#X obj 525 27 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 43 160 *~ 0.6;
#X obj 379 584 delwrite~ \$0-gidel 2000;
#N canvas 0 0 951 510 GrainGui 0;
#N canvas 0 0 586 607 GUI 0;
#X obj 124 68 inlet;
#X obj 194 369 outlet;
#X msg 124 405 phase-rand bang;
#X obj 124 326 bng 15 250 50 0 empty empty phase-rand 17 7 1 10 -262144
-1 -1;
#X text 267 132 random panning width;
#X text 267 162 base volume;
#X text 268 193 random volume width;
#X text 270 230 delay \, random delay variation;
#X text 272 266 grain size and its variation;
#X text 272 326 randomize the phase;
#X obj 124 128 rj/g_hsl pan-r 0 1;
#X obj 124 159 rj/g_hsl vol 0 1;
#X obj 124 190 rj/g_hsl vol-r 0 1;
#X obj 124 225 rj/g_nbx delay;
#X obj 124 260 rj/g_nbx size;
#X obj 124 295 rj/g_nbx bw;
#X obj 194 225 rj/g_nbx delay-r;
#X obj 194 260 rj/g_nbx size-r;
#X obj 193 295 rj/g_nbx grain-rate;
#X connect 0 0 10 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 13 0 16 0;
#X connect 14 0 15 0;
#X connect 15 0 18 0;
#X connect 16 0 17 0;
#X connect 17 0 14 0;
#X connect 18 0 1 0;
#X coords 0 -1 1 1 380 250 1 100 100;
#X restore 543 34 pd GUI;
#X obj 543 289 s \$0-GRAIN;
#X obj 543 15 r \$0-SET-GRAIN;
#X obj 409 17 declare -path .;
#X obj 61 460 throw~ outBusL;
#X obj 387 458 throw~ outBusR;
#X obj 59 435 rj/u_makepoly 8 1 rj/e_graindelread GIT \$0-gidel;
#X msg 233 206 help;
#X msg 264 236 save;
#X obj 264 260 t a b;
#X msg 222 332 pan-r 1 \, delay-r 400 \, delay 8801.2 \, size-r 0 \,
size 21.2703 \, vol-r 0.307703 \, vol -0.423109 \, bw 1 \, phase 0.4819
\, grain-rate 30 \,;
#X obj 222 381 s \$0-SET-GRAIN;
#X obj 154 206 r \$0-GRAIN;
#X obj 321 307 loadbang;
#X obj 222 308 rj/u_cocollect;
#X obj 36 282 rj/e_graindelread GIT \$0-gidel;
#N canvas 0 0 984 670 wiimote 0;
#X obj 165 219 cnv 15 440 200 empty empty Messages: 15 12 1 14 -233017
-1 0;
#X obj 405 233 tgl 18 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 406 253 setRumble \$1;
#X obj 407 298 tgl 18 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 406 275 tgl 18 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 427 298 reportAcceleration \$1;
#X msg 424 275 reportIR \$1;
#X msg 301 291 setLED \$1;
#X obj 301 242 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 325 242 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 349 242 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 373 242 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 296 225 LEDs:;
#N canvas 0 0 409 401 bytemask 0;
#X obj 269 332 outlet;
#X obj 269 279 float;
#X obj 318 183 |;
#X obj 110 239 -;
#X obj 110 204 float;
#X obj 110 184 trigger bang float;
#X obj 231 204 &;
#X obj 183 142 route 0 1;
#X msg 36 56 \$1 1;
#X msg 106 56 \$1 2;
#X msg 176 56 \$1 4;
#X msg 246 56 \$1 8;
#X obj 36 15 inlet;
#X obj 106 15 inlet;
#X obj 176 15 inlet;
#X obj 246 15 inlet;
#X obj 36 35 change;
#X obj 106 35 change;
#X obj 176 35 change;
#X obj 246 35 change;
#X connect 1 0 2 1;
#X connect 1 0 4 1;
#X connect 1 0 6 1;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X connect 5 0 4 0;
#X connect 5 1 6 0;
#X connect 6 0 3 1;
#X connect 7 0 5 0;
#X connect 7 1 2 0;
#X connect 8 0 7 0;
#X connect 9 0 7 0;
#X connect 10 0 7 0;
#X connect 11 0 7 0;
#X connect 12 0 16 0;
#X connect 13 0 17 0;
#X connect 14 0 18 0;
#X connect 15 0 19 0;
#X connect 16 0 8 0;
#X connect 17 0 9 0;
#X connect 18 0 10 0;
#X connect 19 0 11 0;
#X restore 301 268 pd bytemask;
#X obj 408 321 tgl 18 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 427 323 reportNunchuck \$1;
#X msg 258 322 beep;
#X text 174 381 By default \, the wiimote does not report acceleration
data \, IR data \, or any data from an attached extension (eg \, nunchuck).
You must specifically enable each reporting mode:;
#X obj 317 362 s \$0-to-wii;
#X msg 144 -39 debug;
#X msg 113 -68 disconnect;
#X msg 83 -100 discover;
#X msg 59 -130 connect 00:17:AB:37:5D:84;
#X obj 84 21 cnv 15 100 40 empty empty empty 20 12 0 14 -260818 -66577
0;
#X obj 100 186 s \$0-to-blobdisplay;
#X obj 100 165 route xys;
#X obj 151 124 route xyz;
#X obj 99 32 cwiidmote;
#X obj 162 -8 r \$0-to-wii;
#N canvas 1002 326 602 391 button-stuff 0;
#X obj 361 232 send;
#X obj 361 151 unpack s 0;
#X obj 361 207 f;
#X obj 361 174 t b s;
#X obj 391 207 makefilename \$0-btn-%s;
#X obj 361 105 inlet;
#X obj 171 158 tgl 18 0 \$0-btn-B-send \$0-btn-B B 6 10 1 10 -228856
-1 -1 0 1;
#X obj 126 107 tgl 15 0 \$0-btn-Up-send \$0-btn-Up ^ 5 9 0 10 -233017
-1 -1 0 1;
#X obj 111 122 tgl 15 0 \$0-btn-Left-send \$0-btn-Left < 5 9 0 10 -233017
-1 -1 0 1;
#X obj 141 122 tgl 15 0 \$0-btn-Right-send \$0-btn-Right > 5 9 0 10
-233017 -1 -1 0 1;
#X obj 126 137 tgl 15 0 \$0-btn-Down-send \$0-btn-Down ^ 5 9 0 10 -233017
-1 -1 0 1;
#X obj 124 167 tgl 18 0 \$0-btn-A-send \$0-btn-A A 6 10 1 10 -233017
-1 -1 0 1;
#X obj 106 207 tgl 13 0 \$0-btn-Minus-send \$0-btn-Minus - 5 6 1 16
-262144 -1 -1 0 1;
#X obj 126 207 tgl 13 0 \$0-btn-Home-send \$0-btn-Home H 4 7 1 10 -225280
-1 -1 0 1;
#X obj 146 207 tgl 13 0 \$0-btn-Plus-send \$0-btn-Plus + 4 6 1 11 -262144
-1 -1 0 1;
#X obj 126 247 tgl 15 0 \$0-btn-1-send \$0-btn-1 1 5 8 1 10 -233017
-1 -1 0 1;
#X obj 126 268 tgl 15 0 \$0-btn-2-send \$0-btn-2 2 5 8 1 10 -233017
-1 -1 0 1;
#X connect 1 0 3 0;
#X connect 1 1 2 1;
#X connect 2 0 0 0;
#X connect 3 0 2 0;
#X connect 3 1 4 0;
#X connect 4 0 0 1;
#X connect 5 0 1 0;
#X coords 0 -1 1 1 65 200 2 100 100;
#X restore 49 251 pd button-stuff;
#X text 149 -99 <- automatic detection;
#X text 245 -131 <- connect to a specific wiimote;
#N canvas 309 0 700 644 accelerometer-stuff 0;
#X obj 218 12 inlet;
#X obj 366 221 unpack 0 0 0;
#X obj 92 612 expr sqrt(pow($f1 \, 2) + pow($f2 \, 2) + pow($f3 \,
2));
#X obj 357 280 atan;
#X obj 357 259 expr $f1 / $f2;
#X obj 389 304 expr if ($f1 > 0 \, 3.14159 \, -3.14159);
#X obj 357 331 pack 0 0 0;
#X obj 357 353 expr if ($f3 <= 0 \, $f1 + $f2 \, $f1);
#X obj 357 375 * -1;
#X obj 328 61 unpack 0 0 0;
#X obj 42 443 s \$0-wii-pitch-set;
#X obj 357 445 s \$0-wii-roll-set;
#X obj 407 81 s \$0-wii-accZ-set;
#X obj 367 100 s \$0-wii-accY-set;
#X obj 328 119 s \$0-wii-accX-set;
#X text 75 514 The pitch and roll are only accurate if there are no
extra accelerations due to hand movement. We can check if the total
acceleration is close to gravity and only use pitch and roll in that
case. The total acceleration is given by:;
#X text 340 39 raw accerlation:;
#X obj 31 221 unpack 0 0 0;
#X obj 42 280 atan;
#X obj 42 259 expr $f1 / $f2;
#X obj 74 304 expr if ($f1 > 0 \, 3.14159 \, -3.14159);
#X obj 42 331 pack 0 0 0;
#X obj 42 353 expr if ($f3 <= 0 \, $f1 + $f2 \, $f1);
#X obj 42 375 * -1;
#X obj 225 578 unpack 0 0 0;
#X floatatom 26 589 5 0 0 0 - - -;
#X obj 467 610 s \$0-wii-total-acc;
#X connect 0 0 9 0;
#X connect 0 0 17 0;
#X connect 0 0 1 0;
#X connect 0 0 24 0;
#X connect 1 0 4 0;
#X connect 1 0 5 0;
#X connect 1 2 4 1;
#X connect 1 2 6 2;
#X connect 2 0 25 0;
#X connect 2 0 26 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 5 0 6 1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 11 0;
#X connect 9 0 14 0;
#X connect 9 1 13 0;
#X connect 9 2 12 0;
#X connect 17 1 19 0;
#X connect 17 1 20 0;
#X connect 17 2 19 1;
#X connect 17 2 21 2;
#X connect 18 0 21 0;
#X connect 19 0 18 0;
#X connect 20 0 21 1;
#X connect 21 0 22 0;
#X connect 22 0 23 0;
#X connect 23 0 10 0;
#X connect 24 0 2 0;
#X connect 24 1 2 1;
#X connect 24 2 2 2;
#X restore 151 145 pd accelerometer-stuff;
#X obj 79 210 unpack s 0;
#X obj 144 231 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X symbolatom 79 232 7 0 0 0 - - -;
#X obj 121 299 tgl 18 0 \$0-btn-B-send \$0-btn-B B 6 10 1 10 -228856
-1 -1 0 1;
#X text 18 -184 IN ORDER TO CONNECT: First put the wiimote into discover
mode (press buttons 1 and 2 simultaneously) \, then use either the
'discover' or 'connect' method:;
#X obj 19 -204 cnv 15 20 20 empty empty [cwiidmote] 0 7 1 18 -262144
-66577 0;
#X obj 49 187 t a a;
#X obj 114 62 s \$0-from-wii;
#X obj 612 -178 cnv 15 302 533 empty empty empty 20 12 0 14 -1 -66577
0;
#X obj 613 101 cnv 15 300 125 empty empty Accelerometers: 15 12 1 14
-245500 -66577 0;
#X floatatom 743 128 7 0 0 1 _X #0-wii-accX-set #0-wii-accX;
#X floatatom 743 142 7 0 0 1 _Y #0-wii-accY-set #0-wii-accY;
#X floatatom 743 156 7 0 0 1 _Z #0-wii-accZ-set #0-wii-accZ;
#X obj 633 128 hsl 128 14 -1 1 0 0 \$0-wii-accX \$0-wii-accX-set empty
-2 -8 0 10 -225271 -1 -1 6106 1;
#X obj 633 142 hsl 128 14 -1 1 0 0 \$0-wii-accY \$0-wii-accY-set empty
-2 -8 0 10 -225271 -1 -1 2687 1;
#X obj 633 156 hsl 128 14 -1 1 0 0 \$0-wii-accZ \$0-wii-accZ-set empty
-2 -8 0 10 -225271 -1 -1 10922 1;
#X floatatom 743 176 7 0 0 1 _PITCH #0-wii-pitch-set #0-wii-pitch;
#X obj 633 176 hsl 128 14 -3.14156 3.14159 0 0 \$0-wii-pitch \$0-wii-pitch-set
empty -2 -8 0 10 -225280 -1 -1 7715 1;
#X floatatom 743 190 7 0 0 1 _ROLL #0-wii-roll-set #0-wii-roll;
#X obj 633 190 hsl 128 14 -3.14156 3.14159 0 0 \$0-wii-roll \$0-wii-roll-set
empty -2 -8 0 10 -225280 -1 -1 6458 1;
#X text 648 208 Note: range of [-1 \, +1];
#X obj 613 229 cnv 15 300 125 empty empty Nunchuck: 15 12 1 14 -245500
-66577 0;
#N canvas 164 257 610 221 NC-stick 0;
#X obj 39 34 struct NC-stick float x float y;
#X obj 44 71 filledpolygon 900 20 0 5 -5 0 -20 -5 -5 -20 0 -5 5 0 20
5 5 20 0;
#X restore 809 325 pd NC-stick;
#N canvas 195 181 481 416 NC-data 0;
#X scalar NC-stick 130 120  \;;
#X coords 0 0 256 256 80 80 1;
#X restore 809 245 pd NC-data;
#X obj 692 330 tgl 18 0 \$0-btn-C-send \$0-btn-C C 6 10 1 10 -228856
-1 -1 0 2;
#X obj 712 330 tgl 18 0 \$0-btn-Z-send \$0-btn-Z Z 6 10 1 10 -228856
-1 -1 0 1;
#X obj 613 -177 cnv 15 300 275 empty empty IR_Blobs: 15 12 1 14 -245500
-66577 0;
#X obj 632 -142 r \$0-to-blobdisplay;
#N canvas 5 49 729 543 simple-blobview 0;
#X obj 9 9 cnv 15 266 202 empty \$0-bg empty 20 12 0 14 -233000 -66577
0;
#X obj 320 320 send \$0-blob1;
#X obj 320 15 inlet;
#X obj 320 40 unpack 0 0 0 0;
#X obj 387 111 * 192;
#X obj 74 157 bng 8 250 50 0 empty \$0-blob4 4 12 3 1 10 -258699 -1
-1;
#X obj 140 133 bng 8 250 50 0 empty \$0-blob3 3 12 3 1 10 -258699 -1
-1;
#X obj 251 198 bng 8 250 50 0 empty \$0-blob2 2 12 3 1 10 -258699 -1
-1;
#X obj 16 189 bng 8 250 50 0 empty \$0-blob1 1 12 3 1 10 -258699 -1
-1;
#X obj 387 134 + 10;
#X msg 320 192 \$1 pos \$2 \$3;
#X obj 320 169 pack 0 0 0;
#X obj 341 297 send \$0-blob2;
#X obj 363 274 send \$0-blob3;
#X obj 384 248 send \$0-blob4;
#X obj 15 100 cnv 1 256 1 empty empty empty 20 12 1 14 -1 -66577 0
;
#X obj 131 13 cnv 1 1 192 empty empty empty 20 12 0 14 -1 -66577 0
;
#X text 437 195 canvas lives at 10 10 \, area=256x192;
#X text 370 12 list: blobNo X Y Size;
#X obj 352 84 expr 266 - $f1*256;
#X obj 320 216 route 1 2 3 4;
#X connect 2 0 3 0;
#X connect 3 0 11 0;
#X connect 3 1 19 0;
#X connect 3 2 4 0;
#X connect 4 0 9 0;
#X connect 9 0 11 2;
#X connect 10 0 20 0;
#X connect 11 0 10 0;
#X connect 19 0 11 1;
#X connect 20 0 1 0;
#X connect 20 1 12 0;
#X connect 20 2 13 0;
#X connect 20 3 14 0;
#X coords 0 -1 1 1 268 204 2 8 8;
#X restore 632 -121 pd simple-blobview;
#X obj 49 82 route button ir accel nunchuck;
#N canvas 10 73 866 362 nunchuck-stuff 0;
#X obj 315 42 inlet;
#X obj 315 88 route accel joy button;
#X obj 655 262 send;
#X obj 655 181 unpack s 0;
#X obj 655 237 f;
#X obj 655 204 t b s;
#X obj 685 237 makefilename \$0-btn-%s;
#X obj 65 197 unpack 0 0 0;
#X obj 144 217 s \$0-nc-accZ-set;
#X obj 104 236 s \$0-nc-accY-set;
#X obj 65 255 s \$0-nc-accX-set;
#X obj 441 238 pointer;
#X obj 441 195 loadbang;
#X obj 328 200 unpack 0 0;
#X obj 334 283 set NC-stick x y;
#X msg 441 216 traverse pd-NC-data \, next;
#X text 73 284 raw accerlation;
#X obj 65 159 route xyz;
#X obj 345 238 expr 256-$f1;
#X connect 0 0 1 0;
#X connect 1 0 17 0;
#X connect 1 1 13 0;
#X connect 1 2 3 0;
#X connect 3 0 5 0;
#X connect 3 1 4 1;
#X connect 4 0 2 0;
#X connect 5 0 4 0;
#X connect 5 1 6 0;
#X connect 6 0 2 1;
#X connect 7 0 10 0;
#X connect 7 1 9 0;
#X connect 7 2 8 0;
#X connect 11 0 14 2;
#X connect 12 0 15 0;
#X connect 13 0 14 0;
#X connect 13 1 18 0;
#X connect 15 0 11 0;
#X connect 17 0 7 0;
#X connect 18 0 14 1;
#X restore 204 104 pd nunchuck-stuff;
#X floatatom 732 278 7 0 0 1 _X #0-nc-accX-set #0-nc-accX;
#X floatatom 732 292 7 0 0 1 _Y #0-nc-accY-set #0-nc-accY;
#X floatatom 732 306 7 0 0 1 _Z #0-nc-accZ-set #0-nc-accZ;
#X obj 622 278 hsl 128 14 -1 1 0 0 \$0-nc-accX \$0-nc-accX-set empty
-2 -8 0 10 -225271 -1 -1 0 1;
#X obj 622 292 hsl 128 14 -1 1 0 0 \$0-nc-accY \$0-nc-accY-set empty
-2 -8 0 10 -225271 -1 -1 0 1;
#X obj 622 306 hsl 128 14 -1 1 0 0 \$0-nc-accZ \$0-nc-accZ-set empty
-2 -8 0 10 -225271 -1 -1 0 1;
#X text 628 331 buttons:;
#X text 629 260 Accelerometers:;
#X msg 309 -69 connect 00:1E:35:E0:9F:44;
#X obj 360 136 s Lbutton;
#X connect 1 0 2 0;
#X connect 2 0 18 0;
#X connect 3 0 5 0;
#X connect 4 0 6 0;
#X connect 5 0 18 0;
#X connect 6 0 18 0;
#X connect 7 0 18 0;
#X connect 8 0 13 0;
#X connect 9 0 13 1;
#X connect 10 0 13 2;
#X connect 11 0 13 3;
#X connect 13 0 7 0;
#X connect 14 0 15 0;
#X connect 15 0 18 0;
#X connect 16 0 18 0;
#X connect 19 0 27 0;
#X connect 20 0 27 0;
#X connect 21 0 27 0;
#X connect 22 0 27 0;
#X connect 25 0 24 0;
#X connect 26 0 32 0;
#X connect 27 0 40 0;
#X connect 27 0 62 0;
#X connect 28 0 27 0;
#X connect 33 0 35 0;
#X connect 33 1 34 0;
#X connect 39 0 29 0;
#X connect 39 1 33 0;
#X connect 39 1 73 0;
#X connect 60 0 61 0;
#X connect 62 0 39 0;
#X connect 62 1 25 0;
#X connect 62 2 26 0;
#X connect 62 3 63 0;
#X connect 72 0 27 0;
#X restore 45 28 pd wiimote;
#N canvas 302 230 599 538 wii->grain 0;
#X obj 46 54 r \$0-wii-accX;
#X obj 69 132 r \$0-wii-accY;
#X obj 216 129 r \$0-wii-accZ;
#X obj 334 105 r \$0-wii-total-acc;
#X obj 42 325 s \$0-SET-GRAIN;
#X msg 45 177 vol \$1;
#X msg 59 214 vol-r \$1;
#X msg 137 224 delay \$1;
#X obj 69 153 rj/u_follower;
#X obj 46 75 rj/u_follower;
#X msg 308 231 size \$1;
#X obj 319 175 rj/m_scale 0 5 1 100;
#X obj 183 166 rj/u_follower 0;
#X obj 137 191 rj/m_scale 0 1 10 2000;
#X connect 0 0 9 0;
#X connect 1 0 8 0;
#X connect 2 0 12 0;
#X connect 3 0 11 0;
#X connect 5 0 4 0;
#X connect 6 0 4 0;
#X connect 7 0 4 0;
#X connect 8 0 6 0;
#X connect 9 0 5 0;
#X connect 10 0 4 0;
#X connect 11 0 10 0;
#X connect 12 0 13 0;
#X connect 13 0 7 0;
#X restore 46 64 pd wii->grain;
#X obj 392 406 r \$0-GRAIN;
#N canvas 530 19 450 300 OSC 0;
#X obj 49 39 dumpOSC 8008;
#X obj 49 61 OSCroute /accxyz;
#N canvas 309 0 700 644 accelerometer-stuff 0;
#X obj 218 12 inlet;
#X obj 366 221 unpack 0 0 0;
#X obj 92 612 expr sqrt(pow($f1 \, 2) + pow($f2 \, 2) + pow($f3 \,
2));
#X obj 357 280 atan;
#X obj 357 259 expr $f1 / $f2;
#X obj 389 304 expr if ($f1 > 0 \, 3.14159 \, -3.14159);
#X obj 357 331 pack 0 0 0;
#X obj 357 353 expr if ($f3 <= 0 \, $f1 + $f2 \, $f1);
#X obj 357 375 * -1;
#X obj 328 61 unpack 0 0 0;
#X obj 42 443 s \$0-wii-pitch-set;
#X obj 357 445 s \$0-wii-roll-set;
#X obj 407 81 s \$0-wii-accZ-set;
#X obj 367 100 s \$0-wii-accY-set;
#X obj 328 119 s \$0-wii-accX-set;
#X text 75 514 The pitch and roll are only accurate if there are no
extra accelerations due to hand movement. We can check if the total
acceleration is close to gravity and only use pitch and roll in that
case. The total acceleration is given by:;
#X text 340 39 raw accerlation:;
#X obj 31 221 unpack 0 0 0;
#X obj 42 280 atan;
#X obj 42 259 expr $f1 / $f2;
#X obj 74 304 expr if ($f1 > 0 \, 3.14159 \, -3.14159);
#X obj 42 331 pack 0 0 0;
#X obj 42 353 expr if ($f3 <= 0 \, $f1 + $f2 \, $f1);
#X obj 42 375 * -1;
#X obj 225 578 unpack 0 0 0;
#X floatatom 26 589 5 0 0 0 - - -;
#X obj 467 610 s \$0-wii-total-acc;
#X connect 0 0 9 0;
#X connect 0 0 17 0;
#X connect 0 0 1 0;
#X connect 0 0 24 0;
#X connect 1 0 4 0;
#X connect 1 0 5 0;
#X connect 1 2 4 1;
#X connect 1 2 6 2;
#X connect 2 0 25 0;
#X connect 2 0 26 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 5 0 6 1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 11 0;
#X connect 9 0 14 0;
#X connect 9 1 13 0;
#X connect 9 2 12 0;
#X connect 17 1 19 0;
#X connect 17 1 20 0;
#X connect 17 2 19 1;
#X connect 17 2 21 2;
#X connect 18 0 21 0;
#X connect 19 0 18 0;
#X connect 20 0 21 1;
#X connect 21 0 22 0;
#X connect 22 0 23 0;
#X connect 23 0 10 0;
#X connect 24 0 2 0;
#X connect 24 1 2 1;
#X connect 24 2 2 2;
#X restore 44 86 pd accelerometer-stuff;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X restore 340 96 pd OSC;
#X connect 0 0 1 0;
#X connect 2 0 0 0;
#X connect 6 0 4 0;
#X connect 6 1 5 0;
#X connect 7 0 15 1;
#X connect 8 0 9 0;
#X connect 9 0 15 1;
#X connect 9 1 14 1;
#X connect 10 0 11 0;
#X connect 12 0 15 1;
#X connect 13 0 10 0;
#X connect 14 0 10 0;
#X connect 15 2 14 0;
#X connect 18 0 6 1;
#X restore 859 484 pd GrainGui;
#X obj 42 581 catch~ outBusL;
#X obj 47 618 catch~ outBusR;
#X obj 447 548 throw~ outBusL;
#X obj 606 547 throw~ outBusR;
#X obj 567 47 random 1000;
#X obj 434 21 r Lbutton;
#X obj 433 67 spigot;
#X obj 433 42 unpack s 0;
#X obj 434 116 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 432 92 sel A B;
#X connect 8 0 13 0;
#X connect 8 0 16 0;
#X connect 8 0 63 0;
#X connect 8 1 66 0;
#X connect 8 1 19 0;
#X connect 10 0 0 0;
#X connect 11 0 12 0;
#X connect 13 0 62 0;
#X connect 14 0 17 1;
#X connect 15 0 10 1;
#X connect 17 0 0 1;
#X connect 18 0 20 0;
#X connect 21 0 11 0;
#X connect 24 0 18 0;
#X connect 25 0 11 1;
#X connect 26 0 18 1;
#X connect 27 0 32 0;
#X connect 29 0 12 0;
#X connect 30 0 20 0;
#X connect 32 0 28 0;
#X connect 33 0 50 1;
#X connect 34 0 50 0;
#X connect 35 0 75 0;
#X connect 36 0 75 1;
#X connect 38 0 37 0;
#X connect 39 0 37 0;
#X connect 40 0 37 0;
#X connect 41 0 37 0;
#X connect 42 0 37 0;
#X connect 43 0 37 0;
#X connect 45 0 60 2;
#X connect 46 0 47 0;
#X connect 47 0 60 2;
#X connect 48 0 49 0;
#X connect 48 0 40 0;
#X connect 49 0 46 0;
#X connect 50 0 22 0;
#X connect 50 0 53 0;
#X connect 50 0 78 0;
#X connect 50 1 54 0;
#X connect 51 0 55 0;
#X connect 51 0 0 0;
#X connect 51 0 23 0;
#X connect 52 0 56 0;
#X connect 52 0 0 1;
#X connect 52 0 23 0;
#X connect 53 0 0 0;
#X connect 53 0 10 0;
#X connect 53 0 59 0;
#X connect 54 0 0 1;
#X connect 54 0 17 0;
#X connect 54 0 59 0;
#X connect 55 0 60 0;
#X connect 55 0 78 0;
#X connect 56 0 60 1;
#X connect 57 0 20 0;
#X connect 57 0 0 0;
#X connect 57 0 0 1;
#X connect 57 0 78 0;
#X connect 58 0 0 0;
#X connect 58 0 0 1;
#X connect 58 0 77 0;
#X connect 58 0 78 0;
#X connect 59 0 0 0;
#X connect 59 1 0 1;
#X connect 60 0 82 0;
#X connect 60 0 78 0;
#X connect 60 1 83 0;
#X connect 61 0 46 0;
#X connect 63 0 65 0;
#X connect 65 0 64 0;
#X connect 66 0 68 0;
#X connect 68 0 67 0;
#X connect 69 0 56 1;
#X connect 69 0 55 1;
#X connect 69 0 70 0;
#X connect 71 0 73 0;
#X connect 71 0 84 0;
#X connect 72 0 71 1;
#X connect 75 0 51 0;
#X connect 75 1 52 0;
#X connect 76 0 71 0;
#X connect 77 0 12 0;
#X connect 80 0 0 0;
#X connect 81 0 0 1;
#X connect 84 0 72 0;
#X connect 85 0 87 0;
#X connect 86 0 89 0;
#X connect 87 0 86 0;
#X connect 87 1 86 1;
#X connect 88 0 73 0;
#X connect 89 0 88 0;
#X connect 89 1 50 1;
